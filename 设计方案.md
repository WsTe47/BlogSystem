# 任务书内容
核心功能有用户模块、文章模块、社交模块。

用户模块主要有注册、登录、登出以及权限管理功能。在注册过程中，用户在注册页填写信息，服务器对表单数据进行校验；在登录过程中，用户在轻博客系统的登录页填写用户名和密码，服务器将用户名与数据库中的信息进行查询和匹配；在权限管理中，将用户状态的检查设置为一个字段，即可实现权限控制。

文章模块主要有查看文章、创建文章、修改文章、删除文章和文章管理等功能。查看文章，即点击某一文章进入单独的一篇文章页，这一过程是通过文章id获取特定的一篇文章，并显示在页面上；创建文章，将进入文章创建页，需要填写标题和内容提交。提交成功后将信息写入数据库，显示发表成功，并跳转到该文章页。

社交板块主要有留言和点赞功能。留言只有在进入单独一篇的文章页才可以看到，并在该页进行创建和删除等操作，显示留言的过程中，在数据库中获取文章信息，并获取该文章下的所有留言；点赞为用户已登录且进入一篇特定文章下才能进行的操作。文章显示时读取数据库中该文章点赞的数量，并判断该用户是否进行过点赞操作。用户进行点赞操作时，该文章点赞数加1，同时该文章id会存储到该用户的收藏中；若取消点赞，则该文章点赞数减1，同时移除用户收藏中的该文章id。
```go
用户进行点赞操作时，该文章点赞数加1，同时该文章id会存储到该用户的收藏中；若取消点赞，则该文章点赞数减1，同时移除用户收藏中的该文章id。
这个意思是直接收藏和点赞是一回事？还是完全分开搞更合逻辑
。
```


# 技术方案
后端使用go语言、gin框架进行编写。  
需要用到Mysql数据库，采取gorm库进行操作。  
前端采用Vue或其他进行编写（此部分还没有学，计划广泛采取ai产品）


# 任务分析
## 用户模块
1、注册——校验、存到数据库。  
2、登录——检查数据库，返回结果。（输入不合法、用户名未找到、密码错误、用户已被封禁）  
3、登出——修改在线状态。  
4、权限管理——检查该用户是否是超级管理员，若是则进入，对id用户的状态进行设置（封禁、解封）若否则报无权限。

## 文章模块
1、查看文章——查询、返回文章的所有数据（结构体 后续对接前端处理）  
2、创建文章——新增，新增一条文章结构体（检测题目、内容）。  
3、修改——修改。  
4、删除——删除。


## 社交模块
1、留言、点赞、收藏：插入数据到留言、点赞、收藏的表里面。  
2、计算点赞数量——查库。在进入文章页面时候调用。


# 数据库内容
## 用户表（Users）
| 列名        | 类型       | 含义               | 备注                                        |
| ----------- | ---------- | ------------------ | ------------------------------------------- |
| uid         | INT        | 用户id             | 主键，自增，外键（Blogs.id）                |
| name        | VARCHAR    | 用户名             | 6-12位长度，限制字母、数字，使用正则表达式判断合法性 |
| phone       | VARCHAR    | 手机号             | 注册所需，判断合法性                        |
| password    | VARCHAR    | 密码               | 6-12位长度，限制字母、数字，使用正则表达式判断合法性 |
| role        | INT        | 角色               | 分超级管理员0、管理员1、用户2三种            |
| state       | INT        | 用户状态           | 分为在线1，离线2，封禁3                            |
| created_at  | DATETIME   | 创建时间           |                                             |
| updated_at  | DATETIME   | 更新时间           |                                             |
| likes       | TEXT       | 点赞列表           | 需序列化处理，具体开发时再定                |

## 文章表 (Blogs)
| 列名        | 类型        | 含义       | 备注                              |
| ----------- | ----------- | ---------- | --------------------------------- |
| Bid         | INT         | 文章ID     | 主键，自增                        |
| author_id   | INT         | 作者ID     | 外键 (Users.uid)                  |
| title       | VARCHAR     | 标题       |                                   |
| content     | LONGTEXT    | 内容       |                                   |
| created_at  | DATETIME    | 创建时间   |                                   |
| updated_at  | DATETIME    | 更新时间   |                                   |
| is_deleted  | TINYINT(1)  | 是否删除   | 删除了放在回收站                  |
| show_state  | INT         | 展示状态   | 1公开、2私密、3仅好友可见         |

## 留言表 (comments)
| 列名           | 类型          | 含义       | 备注                   |
| -------------- | ------------- | ---------- | ---------------------- |
| id             | INT           | 留言ID     | 主键，自增             |
| article_id     | INT           | 文章ID     | 外键 (Blogs.id)     |
| author_id      | INT           | 作者ID     | 外键 (users.id)        |
| content        | TEXT          | 留言内容   |                        |
| created_at     | DATETIME      | 创建时间   |                        |
| is_deleted     | TINYINT(1)    | 是否删除   | 默认为0，软删除标志    |


## 点赞表 (likes)
| 列名           | 类型          | 含义       | 备注                   |
| -------------- | ------------- | ---------- | ---------------------- |
| id             | INT           | 点赞ID     | 主键，自增             |
| article_id     | INT           | 文章ID     | 外键 (Blogs.id)     |
| user_id        | INT           | 用户ID     | 外键 (users.id)        |
| created_at     | DATETIME      | 点赞时间   |                        |

## 用户收藏表 (favorites)
| 列名           | 类型          | 含义       | 备注                   |
| -------------- | ------------- | ---------- | ---------------------- |
| id             | INT           | 收藏ID     | 主键，自增             |
| article_id     | INT           | 文章ID     | 外键 (articles.id)     |
| user_id        | INT           | 用户ID     | 外键 (users.id)        |
| created_at     | DATETIME      | 收藏时间   |                        |


# 时间计划表
|时间|工作内容|备注|
|-|-|-|
|12.24——12.31| 完成计划书，完成初步设计，准备开始代码。|
|1.1——1.7|后端代码编写，完成当前文档中涉及的主体功能|
|1.8——1.14|完善后端功能。|
|1-15——1.21|前端学习与开发，搭建前端页面供后端进行测试。后端bug修改。|
|1.22——1.28|前端页面美化|
|1.29——年前|完善全部代码部分，预留时间修复先前所遇到bug|

# 开发阶段目标

1、完成前后端代码、数据库代码。

2、产出开发文档，使用md进行记录。供后期查阅。

3、记录参考资料，供后期查阅。

4、进行绘图，或采取工具生成图，总之产出部分图，供后期写作时使用。